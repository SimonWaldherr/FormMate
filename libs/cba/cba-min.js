/*--------------------------------------------
 *  (c) 2007 CrossBrowserAjax, version 1.10
 *  Type: Compressed
 *--------------------------------------------*/
function cbaDOM(){this.removeElement=function(_element){_element.parentNode.removeChild(_element);};this.createElement=function(_parent,_type,_property,_text){var el=document.createElement(_type);for(var k in _property){var keys=k.split('.');if(keys.length==2){el[keys[0]][keys[1]]=_property[k];}else{el[k]=_property[k];}}if(_text!='')el.innerHTML=_text;_parent.appendChild(el);return el;};this.createScript=function(_parent,_id,_request){var span=this.createElement(_parent,'span',{'style.display':'none','id':_id},'%<s'+'cript></'+'script>');setTimeout(function(){var _script=span.getElementsByTagName('script')[0];_script.type='text/javascript';_script.src=_request;},5);}}function cbaCache(buffer_size,length_ct){this._rct=function(_request,_length){var control=0;var start=Math.floor(_request.length/_length);if(start<1)start=1;for(var i=_request.length;i>0;i-=start){control+='                                  !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~ˆ?‚?„…†‡?‰S‹??Z??‘’“”•–—?™s›??zY ???¤?¦§?©?«¬­®?°±???µ¶·???»????AAAAAA?CEEEEIIII?NOOOOO?OUUUUY??aaaaaa?ceeeeiiii?nooooo?ouuuuy?y'.indexOf(_request.charAt(i));}return control;};this._search=function(_request){var _hash=this._rct(_request,this._length_ct);for(i in this._cache){if(this._cache[i][0]==_hash&&this._cache[i][1]==_request){this._search_buffer=this._data_cache[i];return true;}}return false;};this._add=function(_request,_data){if(this._cache_index>=this._buffer_size){this._cache_index=0;}var _hash=this._rct(_request,this._length_ct);this._cache[this._cache_index]=[_hash,_request];this._data_cache[this._cache_index]=_data;this._cache_index++;};this._init=function(buffer_size,length_ct){this._buffer_size=buffer_size;this._length_ct=length_ct;this._cache=new Array();this._data_cache=new Array();this._cache_index=0;this._search_buffer=null;};this._init(buffer_size,length_ct);}function cbaRequest(){this._init=function(){this._handler_error=true;if(this._handler_error){window.onerror=this.cbaJsError;}this._parent_id_name='_cba_parent_id';this._url_id='_cba_request_id';this._id_prefix='_cba_pack_';this.dom=new cbaDOM();this._parent_element=this.createParentElement();this._requests=new Array();this._caching_enabled=true;if(this._caching_enabled){this._buffer_size=25;this._length_ct=100;this.cache=new cbaCache(this._buffer_size,this._length_ct);}};this.cbaJsError=function(_message,_url,_line){var _file="File: "+_url+" :: "+_line+"\n";var _title="There was an error on this page.\n--------------------------\n";var _error=_title;_error+="Error: "+_message+"\n";_error+=_file;if(_message.indexOf('unterminated string literal')+_message.indexOf('missing ;')+_message.indexOf('Syntax error')>-3){_error+='--------------------------\nRecommendation:\n   Check response from the server.\n   He may return incorrect JavaScrip.';}alert(_error);};this.createParentElement=function(){if(document.getElementById(this._parent_id_name)){return document.getElementById(this._parent_id_name);}else{return this.dom.createElement(document.body,'div',{'id':this._parent_id_name},'');}};this.query=function(_url,_callback){if(arguments.length>2){var _use_cache=arguments[2];}else{var _use_cache=true;};if(_use_cache&&(this.cache&&this.cache._search(_url))){this.answer=this.cache._search_buffer;if(_callback instanceof Function)_callback();}else{var _id=this._requests.push({'callback':_callback,'request':_url})-1;if(_url.indexOf('?')==-1){_url+='?';}else{_url+='&';};_url+=this._url_id+'='+_id;this.dom.createScript(this._parent_element,this._id_prefix+_id,_url);}};this.ready=function(_id,_result){this.answer=_result;if(this.cache)this.cache._add(this._requests[_id].request,_result);if(this._requests[_id].callback instanceof Function)this._requests[_id].callback();if(document.getElementById(this._id_prefix+_id)){this.dom.removeElement(document.getElementById(this._id_prefix+_id));}delete(this._requests[_id]);};this._init(arguments);}var _cba=null;function cbaUpdateElement(_doc_id,_url){var _loading_text=(arguments[2])?arguments[2]:null;var _caching=(arguments.length>3)?arguments[3]:true;var _template=(arguments[4])?arguments[4]:'%1';var _error_template=(arguments[5])?arguments[5]:null;var _user_method=(arguments[6])?arguments[6]:null;if(_loading_text)document.getElementById(_doc_id).innerHTML=_loading_text;if(!_cba)_cba=new cbaRequest();_cba.query(_url,function(){if((_error_template)&&_cba.answer==_error_template[0]){document.getElementById(_doc_id).innerHTML=_error_template[1];}else{if(typeof(_cba.answer)=='object'){var _result=_template;for(key in _cba.answer){_result=_result.replace('%'+key+'%',_cba.answer[key]);}document.getElementById(_doc_id).innerHTML=_result;}else{document.getElementById(_doc_id).innerHTML=_template.replace('%1',_cba.answer);}};if(_user_method&&_user_method instanceof Function)_user_method();},_caching);}
